---
import { t } from "../../i18n/utils";
const { lang } = Astro.props;
---

<section
    id="spedition"
    class="bg-white text-primary-700 py-8 md:py-16 px-4 md:px-12 overflow-hidden"
>
    <div class="max-w-7xl mx-auto">
        <div class="text-center mb-8 md:mb-16 animate-on-scroll">
            <h2
                class="text-3xl md:text-4xl font-bold mb-4 md:mb-6 text-center border-b border-text-primary-700 pb-4"
            >
                {t(lang, "spedition.title")}
            </h2>
            <p class="text-base md:text-xl text-primary-700 max-w-3xl mx-auto">
                {t(lang, "spedition.intro")}
            </p>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-16">
            <div class="animate-on-scroll space-y-8">
                <div
                    class="bg-white rounded-xl shadow-lg p-8 border border-neutral-200 hover:shadow-xl transition-shadow"
                >
                    <h3 class="text-2xl font-bold text-primary-900 mb-6">
                        {t(lang, "spedition.lookingFor.title")}
                    </h3>
                    <ul class="space-y-4">
                        <li class="flex items-start space-x-3">
                            <svg
                                class="w-6 h-6 text-accent-500 mt-0.5 flex-shrink-0"
                                fill="currentColor"
                                viewBox="0 0 20 20"
                            >
                                <path
                                    fill-rule="evenodd"
                                    d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                    clip-rule="evenodd"></path>
                            </svg>
                            <span class="text-lg text-primary-700"
                                >{t(lang, "spedition.lookingFor.tractor")}</span
                            >
                        </li>
                        <li class="flex items-start space-x-3">
                            <svg
                                class="w-6 h-6 text-accent-500 mt-0.5 flex-shrink-0"
                                fill="currentColor"
                                viewBox="0 0 20 20"
                            >
                                <path
                                    fill-rule="evenodd"
                                    d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                    clip-rule="evenodd"></path>
                            </svg>
                            <span class="text-lg text-primary-700"
                                >{
                                    t(lang, "spedition.lookingFor.trailers")
                                }</span
                            >
                        </li>
                    </ul>
                </div>
                <div
                    class="bg-white rounded-xl shadow-lg p-8 border border-neutral-200 hover:shadow-xl transition-shadow"
                >
                    <h4 class="text-2xl font-bold text-primary-900 mb-6">
                        {t(lang, "spedition.offer.title")}
                    </h4>
                    <div class="grid grid-cols-1 gap-4">
                        <div
                            class="flex items-center space-x-3 p-4 bg-neutral-50 rounded-lg hover:bg-neutral-100 transition-colors"
                        >
                            <svg
                                class="w-6 h-6 text-accent-500"
                                fill="currentColor"
                                viewBox="0 0 20 20"
                            >
                                <path
                                    fill-rule="evenodd"
                                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                                    clip-rule="evenodd"></path>
                            </svg>
                            <span class="text-lg text-primary-700"
                                >{
                                    t(lang, "spedition.offer.competitiveRates")
                                }</span
                            >
                        </div>
                        <div
                            class="flex items-center space-x-3 p-4 bg-neutral-50 rounded-lg hover:bg-neutral-100 transition-colors"
                        >
                            <svg
                                class="w-6 h-6 text-accent-500"
                                fill="currentColor"
                                viewBox="0 0 20 20"
                            >
                                <path
                                    fill-rule="evenodd"
                                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                                    clip-rule="evenodd"></path>
                            </svg>
                            <span class="text-lg text-primary-700"
                                >{t(lang, "spedition.offer.mobileApp")}</span
                            >
                        </div>
                        <div
                            class="flex items-center space-x-3 p-4 bg-neutral-50 rounded-lg hover:bg-neutral-100 transition-colors"
                        >
                            <svg
                                class="w-6 h-6 text-accent-500"
                                fill="currentColor"
                                viewBox="0 0 20 20"
                            >
                                <path
                                    fill-rule="evenodd"
                                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                                    clip-rule="evenodd"></path>
                            </svg>
                            <span class="text-lg text-primary-700"
                                >{t(lang, "spedition.offer.fastPayments")}</span
                            >
                        </div>
                        <div
                            class="flex items-center space-x-3 p-4 bg-neutral-50 rounded-lg hover:bg-neutral-100 transition-colors"
                        >
                            <svg
                                class="w-6 h-6 text-accent-500"
                                fill="currentColor"
                                viewBox="0 0 20 20"
                            >
                                <path
                                    fill-rule="evenodd"
                                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                                    clip-rule="evenodd"></path>
                            </svg>
                            <span class="text-lg text-primary-700"
                                >{t(lang, "spedition.offer.fuelCards")}</span
                            >
                        </div>
                        <div
                            class="flex items-center space-x-3 p-4 bg-neutral-50 rounded-lg hover:bg-neutral-100 transition-colors"
                        >
                            <svg
                                class="w-6 h-6 text-accent-500"
                                fill="currentColor"
                                viewBox="0 0 20 20"
                            >
                                <path
                                    fill-rule="evenodd"
                                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                                    clip-rule="evenodd"></path>
                            </svg>
                            <span class="text-lg text-primary-700"
                                >{
                                    t(
                                        lang,
                                        "spedition.offer.dedicatedDispatcher",
                                    )
                                }</span
                            >
                        </div>
                        <div
                            class="flex items-center space-x-3 p-4 bg-neutral-50 rounded-lg hover:bg-neutral-100 transition-colors"
                        >
                            <svg
                                class="w-6 h-6 text-accent-500"
                                fill="currentColor"
                                viewBox="0 0 20 20"
                            >
                                <path
                                    fill-rule="evenodd"
                                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                                    clip-rule="evenodd"></path>
                            </svg>
                            <span class="text-lg text-primary-700"
                                >{
                                    t(lang, "spedition.offer.ocpdInsurance")
                                }</span
                            >
                        </div>
                    </div>
                </div>
            </div>
            <div class="animate-on-scroll">
                <div
                    class="bg-white rounded-xl shadow-lg p-8 border border-neutral-200 hover:shadow-xl transition-shadow"
                >
                    <h3 class="text-2xl font-bold text-primary-900 mb-8">
                        {t(lang, "spedition.form.title")}
                    </h3>

                    <form
                        id="speditionForm"
                        class="space-y-6"
                        onsubmit="handleSpeditionSubmit(event)"
                    >
                        <div>
                            <label
                                class="block text-base font-medium text-primary-700 mb-2"
                            >
                                {t(lang, "spedition.form.companyName")}
                            </label>
                            <input
                                name="companyName"
                                type="text"
                                required
                                placeholder={t(
                                    lang,
                                    "spedition.form.companyNamePlaceholder",
                                )}
                                class="w-full px-4 py-3 rounded-lg border border-neutral-300 focus:ring-2 focus:ring-accent-500 focus:border-accent-500 transition-all"
                            />
                        </div>

                        <div>
                            <label
                                class="block text-base font-medium text-primary-700 mb-2"
                            >
                                {t(lang, "spedition.form.email")}
                            </label>
                            <input
                                name="email"
                                type="email"
                                required
                                placeholder={t(
                                    lang,
                                    "spedition.form.emailPlaceholder",
                                )}
                                class="w-full px-4 py-3 rounded-lg border border-neutral-300 focus:ring-2 focus:ring-accent-500 focus:border-accent-500 transition-all"
                            />
                        </div>

                        <div>
                            <label
                                class="block text-base font-medium text-primary-700 mb-2"
                            >
                                {t(lang, "spedition.form.phone")}
                            </label>
                            <input
                                name="phone"
                                type="tel"
                                placeholder="0031 613197574"
                                class="w-full px-4 py-3 rounded-lg border border-neutral-300 focus:ring-2 focus:ring-accent-500 focus:border-accent-500 transition-all"
                            />
                        </div>

                        <div>
                            <label
                                class="block text-base font-medium text-primary-700 mb-2"
                            >
                                {t(lang, "spedition.form.fleetType")}
                            </label>
                            <select
                                name="fleet-type"
                                class="w-full px-4 py-3 rounded-lg border border-neutral-300 focus:ring-2 focus:ring-accent-500 focus:border-accent-500 transition-all"
                            >
                                <option value=""
                                    >{
                                        t(
                                            lang,
                                            "spedition.form.fleetPlaceholder",
                                        )
                                    }</option
                                >
                                <option value="refrigerated"
                                    >{
                                        t(
                                            lang,
                                            "spedition.form.fleet.refrigerated",
                                        )
                                    }</option
                                >
                                <option value="mega"
                                    >{
                                        t(lang, "spedition.form.fleet.mega")
                                    }</option
                                >
                                <option value="isothermal"
                                    >{
                                        t(
                                            lang,
                                            "spedition.form.fleet.isothermal",
                                        )
                                    }</option
                                >
                                <option value="solo"
                                    >{
                                        t(lang, "spedition.form.fleet.solo")
                                    }</option
                                >
                                <option value="other"
                                    >{
                                        t(lang, "spedition.form.fleet.other")
                                    }</option
                                >
                            </select>
                        </div>

                        <div>
                            <label
                                class="block text-base font-medium text-primary-700 mb-2"
                            >
                                {t(lang, "spedition.form.message")}
                            </label>
                            <textarea
                                name="message"
                                rows="4"
                                required
                                placeholder={t(
                                    lang,
                                    "spedition.form.messagePlaceholder",
                                )}
                                class="w-full px-4 py-3 rounded-lg border border-neutral-300 focus:ring-2 focus:ring-accent-500 focus:border-accent-500 transition-all"
                            ></textarea>
                        </div>

                        <button
                            type="submit"
                            class="w-full bg-accent-500 text-white py-3 px-6 rounded-lg text-lg font-semibold hover:bg-accent-600 focus:ring-2 focus:ring-accent-500 focus:ring-offset-2 transition-all"
                        >
                            {t(lang, "spedition.form.submit")}
                        </button>
                    </form>

                    <div class="mt-8 pt-8 border-t border-neutral-200">
                        <h4 class="text-xl font-bold text-primary-900 mb-4">
                            {t(lang, "spedition.contact.heading")}
                        </h4>
                        <div class="space-y-3">
                            <a
                                href="tel:+31201234567"
                                class="flex items-center space-x-2 text-accent-500 hover:text-accent-600 transition-colors text-lg"
                            >
                                <svg
                                    class="w-5 h-5"
                                    fill="none"
                                    stroke="currentColor"
                                    viewBox="0 0 24 24"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        stroke-width="2"
                                        d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
                                    ></path>
                                </svg>
                                <span>{t(lang, "spedition.contact.phone")}</span
                                >
                            </a>
                            <a
                                href="mailto:office@dgklogistics.nl"
                                class="flex items-center space-x-2 text-accent-500 hover:text-accent-600 transition-colors text-lg"
                            >
                                <svg
                                    class="w-5 h-5"
                                    fill="none"
                                    stroke="currentColor"
                                    viewBox="0 0 24 24"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        stroke-width="2"
                                        d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                                    ></path>
                                </svg>
                                <span>{t(lang, "spedition.contact.email")}</span
                                >
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script is:inline>
    function handleSpeditionSubmit(event) {
        event.preventDefault();

        const form = event.target;

        // Get fleet type value and format it nicely
        const fleetValue = form["fleet-type"].value;
        const fleetMap = {
            refrigerated: "Chłodnia",
            mega: "Mega",
            isothermal: "Izoterma",
            solo: "Solo",
            other: "Inne",
        };

        const templateParams = {
            name: form.companyName.value.trim() || "Nie podano",
            email: form.email.value.trim() || "Nie podano",
            phone: form.phone.value.trim() || "Nie podano",
            company: form.companyName.value.trim() || "Nie podano",
            service: fleetMap[fleetValue] || "Nie wybrano", // using service instead of fleet to match template
            message: form.message.value.trim() || "Brak wiadomości",
            time: new Date().toLocaleString("pl-PL", {
                day: "numeric",
                month: "long",
                year: "numeric",
                hour: "2-digit",
                minute: "2-digit",
                hour12: false,
            }),
            subject: `Nowy przewoźnik - ${form.companyName.value.trim() || "Nowa firma"}`,
        };

        // Wyślij e-mail przez EmailJS
        emailjs
            .send("service_ssved6m", "template_8k4nf7m", templateParams)
            .then(
                function (response) {
                    alert("Wiadomość została wysłana!");
                    form.reset();
                },
                function (error) {
                    console.error("FAILED...", error);
                    alert("Wystąpił błąd przy wysyłaniu wiadomości...");
                },
            );
    }
</script>
